{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Chart as ChartJS,CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend,ArcElement}from'chart.js';import{Bar,Pie}from'react-chartjs-2';import{fetchCategoryChartData,fetchCustomerChartData}from'../api';// Register ChartJS components\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend,ArcElement);function ChartPage(){const[token,setToken]=useState('');const[customerChartData,setCustomerChartData]=useState(null);const[categoryChartData,setCategoryChartData]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState('');// Fetch category chart data (no token required)\nuseEffect(()=>{setLoading(true);fetchCategoryChartData().then(res=>{setCategoryChartData(res.data);setLoading(false);}).catch(err=>{console.error('Error fetching category chart data:',err);setError('Failed to fetch category chart data');setLoading(false);});},[]);// Fetch customer chart data (requires token)\nuseEffect(()=>{if(!token)return;setLoading(true);fetchCustomerChartData(token).then(res=>{setCustomerChartData(res.data);setLoading(false);}).catch(err=>{console.error('Error fetching customer chart data:',err);setError('Failed to fetch customer chart data');setLoading(false);});},[token]);// Options for the bar chart\nconst barOptions={responsive:true,plugins:{legend:{position:'top'},title:{display:true,text:'Jumlah Pelanggan per Bulan'}}};// Options for the pie chart\nconst pieOptions={responsive:true,plugins:{legend:{position:'top'},title:{display:true,text:'Jumlah Item per Kategori'}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Dashboard Chart\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"token\",className:\"form-label\",children:\"API Token (untuk data pelanggan)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"token\",placeholder:\"Masukkan API token untuk mengakses data pelanggan\",value:token,onChange:e=>setToken(e.target.value)})]}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading chart data...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:\"Data Kategori\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:categoryChartData?/*#__PURE__*/_jsx(Pie,{data:categoryChartData,options:pieOptions}):/*#__PURE__*/_jsx(\"p\",{children:\"Tidak ada data kategori tersedia\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:\"Data Pelanggan per Bulan\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:customerChartData?/*#__PURE__*/_jsx(Bar,{data:customerChartData,options:barOptions}):/*#__PURE__*/_jsx(\"p\",{children:token?'Memuat data...':'Masukkan token untuk melihat data pelanggan'})})]})})]})]});}export default ChartPage;","map":{"version":3,"names":["React","useState","useEffect","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","ArcElement","Bar","Pie","fetchCategoryChartData","fetchCustomerChartData","jsx","_jsx","jsxs","_jsxs","register","ChartPage","token","setToken","customerChartData","setCustomerChartData","categoryChartData","setCategoryChartData","loading","setLoading","error","setError","then","res","data","catch","err","console","barOptions","responsive","plugins","legend","position","title","display","text","pieOptions","className","children","htmlFor","type","id","placeholder","value","onChange","e","target","options"],"sources":["C:/xampp2/htdocs/project-react-resto/src/pages/ChartPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Chart as ChartJS, \n  CategoryScale, \n  LinearScale, \n  BarElement, \n  Title, \n  Tooltip, \n  Legend, \n  ArcElement \n} from 'chart.js';\nimport { Bar, Pie } from 'react-chartjs-2';\nimport { fetchCategoryChartData, fetchCustomerChartData } from '../api';\n\n// Register ChartJS components\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  ArcElement\n);\n\nfunction ChartPage() {\n  const [token, setToken] = useState('');\n  const [customerChartData, setCustomerChartData] = useState(null);\n  const [categoryChartData, setCategoryChartData] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  // Fetch category chart data (no token required)\n  useEffect(() => {\n    setLoading(true);\n    fetchCategoryChartData()\n      .then(res => {\n        setCategoryChartData(res.data);\n        setLoading(false);\n      })\n      .catch(err => {\n        console.error('Error fetching category chart data:', err);\n        setError('Failed to fetch category chart data');\n        setLoading(false);\n      });\n  }, []);\n\n  // Fetch customer chart data (requires token)\n  useEffect(() => {\n    if (!token) return;\n    \n    setLoading(true);\n    fetchCustomerChartData(token)\n      .then(res => {\n        setCustomerChartData(res.data);\n        setLoading(false);\n      })\n      .catch(err => {\n        console.error('Error fetching customer chart data:', err);\n        setError('Failed to fetch customer chart data');\n        setLoading(false);\n      });\n  }, [token]);\n\n  // Options for the bar chart\n  const barOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top',\n      },\n      title: {\n        display: true,\n        text: 'Jumlah Pelanggan per Bulan',\n      },\n    },\n  };\n\n  // Options for the pie chart\n  const pieOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top',\n      },\n      title: {\n        display: true,\n        text: 'Jumlah Item per Kategori',\n      },\n    },\n  };\n\n  return (\n    <div className=\"container mt-4\">\n      <h2>Dashboard Chart</h2>\n      \n      {/* Token input for customer data */}\n      <div className=\"mb-4\">\n        <label htmlFor=\"token\" className=\"form-label\">API Token (untuk data pelanggan)</label>\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          id=\"token\"\n          placeholder=\"Masukkan API token untuk mengakses data pelanggan\"\n          value={token}\n          onChange={e => setToken(e.target.value)}\n        />\n      </div>\n\n      {loading && <p>Loading chart data...</p>}\n      {error && <p className=\"text-danger\">{error}</p>}\n\n      <div className=\"row\">\n        {/* Category Chart (Pie) */}\n        <div className=\"col-md-6 mb-4\">\n          <div className=\"card\">\n            <div className=\"card-header\">Data Kategori</div>\n            <div className=\"card-body\">\n              {categoryChartData ? (\n                <Pie data={categoryChartData} options={pieOptions} />\n              ) : (\n                <p>Tidak ada data kategori tersedia</p>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Customer Chart (Bar) */}\n        <div className=\"col-md-6 mb-4\">\n          <div className=\"card\">\n            <div className=\"card-header\">Data Pelanggan per Bulan</div>\n            <div className=\"card-body\">\n              {customerChartData ? (\n                <Bar data={customerChartData} options={barOptions} />\n              ) : (\n                <p>{token ? 'Memuat data...' : 'Masukkan token untuk melihat data pelanggan'}</p>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ChartPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}