{"ast":null,"code":"import React,{useEffect,useState}from'react';import{fetchCustomerById,updateCustomer}from'../api';import{useParams,useNavigate}from'react-router-dom';import{handleInputChange,resetForm}from'../form';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EditCustomer(){const{id}=useParams();const[form,setForm]=useState({nama:'',alamat:'',telepon:''});const[token,setToken]=useState('');const[message,setMessage]=useState('');const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{if(!token)return;fetchCustomerById(id,token).then(res=>setForm({nama:res.data.nama,alamat:res.data.alamat,telepon:res.data.telepon})).catch(()=>setError('Failed to fetch customer.'));},[id,token]);const handleSubmit=e=>{e.preventDefault();setMessage('');setError('');updateCustomer(id,form,token).then(()=>{setMessage('Pelanggan berhasil diperbarui!');setTimeout(()=>navigate('/customers'),1000);}).catch(err=>{if(err.response&&err.response.data&&err.response.data.pesan){setError(err.response.data.pesan);}else{setError('Failed to update customer.');}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Pelanggan\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"token\",className:\"form-label\",children:\"API Token\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"token\",value:token,onChange:e=>setToken(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nama\",className:\"form-label\",children:\"Nama Pelanggan\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"nama\",name:\"nama\",value:form.nama,onChange:e=>handleInputChange(e,form,setForm),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"alamat\",className:\"form-label\",children:\"Alamat\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"alamat\",name:\"alamat\",value:form.alamat,onChange:e=>handleInputChange(e,form,setForm),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"telepon\",className:\"form-label\",children:\"Telepon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"telepon\",name:\"telepon\",value:form.telepon,onChange:e=>handleInputChange(e,form,setForm),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Update\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success mt-3\",children:message}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mt-3\",children:error})]});}export default EditCustomer;","map":{"version":3,"names":["React","useEffect","useState","fetchCustomerById","updateCustomer","useParams","useNavigate","handleInputChange","resetForm","jsx","_jsx","jsxs","_jsxs","EditCustomer","id","form","setForm","nama","alamat","telepon","token","setToken","message","setMessage","error","setError","navigate","then","res","data","catch","handleSubmit","e","preventDefault","setTimeout","err","response","pesan","className","children","onSubmit","htmlFor","type","value","onChange","target","required","name"],"sources":["C:/xampp2/htdocs/project-react-resto/src/pages/EditCustomer.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { fetchCustomerById, updateCustomer } from '../api';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { handleInputChange, resetForm } from '../form';\r\n\r\nfunction EditCustomer() {\r\n  const { id } = useParams();\r\n  const [form, setForm] = useState({ nama: '', alamat: '', telepon: '' });\r\n  const [token, setToken] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n    fetchCustomerById(id, token)\r\n      .then(res => setForm({ nama: res.data.nama, alamat: res.data.alamat, telepon: res.data.telepon }))\r\n      .catch(() => setError('Failed to fetch customer.'));\r\n  }, [id, token]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setMessage('');\r\n    setError('');\r\n    updateCustomer(id, form, token)\r\n      .then(() => {\r\n        setMessage('Pelanggan berhasil diperbarui!');\r\n        setTimeout(() => navigate('/customers'), 1000);\r\n      })\r\n      .catch(err => {\r\n        if (err.response && err.response.data && err.response.data.pesan) {\r\n          setError(err.response.data.pesan);\r\n        } else {\r\n          setError('Failed to update customer.');\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>Edit Pelanggan</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"token\" className=\"form-label\">API Token</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"token\"\r\n            value={token}\r\n            onChange={e => setToken(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"nama\" className=\"form-label\">Nama Pelanggan</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"nama\"\r\n            name=\"nama\"\r\n            value={form.nama}\r\n            onChange={e => handleInputChange(e, form, setForm)}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"alamat\" className=\"form-label\">Alamat</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"alamat\"\r\n            name=\"alamat\"\r\n            value={form.alamat}\r\n            onChange={e => handleInputChange(e, form, setForm)}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"telepon\" className=\"form-label\">Telepon</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"telepon\"\r\n            name=\"telepon\"\r\n            value={form.telepon}\r\n            onChange={e => handleInputChange(e, form, setForm)}\r\n            required\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-primary\">Update</button>\r\n      </form>\r\n      {message && <div className=\"alert alert-success mt-3\">{message}</div>}\r\n      {error && <div className=\"alert alert-danger mt-3\">{error}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditCustomer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}